<?php
 goto OTOV3; kUo89: function handleDelete($pdo) { $data = json_decode(file_get_contents("\x70\x68\x70\72\57\57\151\156\x70\165\x74"), true); $table = $data["\x74\x61\x62\154\x65"] ?? null; $column = $data["\143\x6f\x6c\x75\155\x6e"] ?? null; $value = $data["\166\141\x6c\165\x65"] ?? null; if ($table && $column && $value) { $stmt = $pdo->prepare("\x44\105\x4c\105\124\x45\x20\106\122\x4f\x4d\x20\x60{$table}\x60\40\127\x48\105\122\105\40{$column}\40\x3d\40\x3f"); $stmt->execute(array($value)); echo json_encode(array("\155\x65\163\x73\x61\147\145" => "\x44\x6f\156\156\303\xa9\145\x73\x20\163\165\x70\160\x72\151\155\303\xa9\145\x73\40\141\166\x65\x63\40\163\x75\x63\143\303\xa8\163\56")); } else { http_response_code(400); echo json_encode(array("\145\162\162\x6f\162" => "\x54\141\x62\154\145\x2c\x20\x63\157\154\157\156\156\145\40\x6f\165\40\166\141\x6c\x65\x75\162\x20\x6d\141\x6e\161\165\141\x6e\164\x65\x2e")); } } goto r3WzO; wnAz2: if (file_exists($encryptedFile)) { $encryptedData = file_get_contents($encryptedFile); $iv = substr($encryptedData, 0, 16); $ciphertext = substr($encryptedData, 16); $decryptedData = openssl_decrypt($ciphertext, "\141\x65\163\55\62\x35\66\55\143\142\143", $key, OPENSSL_RAW_DATA, $iv); if ($decryptedData === false) { http_response_code(500); echo json_encode(array("\x65\x72\162\157\162" => "\xc3\x89\143\x68\145\143\x20\144\x75\40\144\xc3\251\143\x68\x69\146\x66\x72\x65\155\x65\156\x74\40\72\x20" . openssl_error_string())); die; } if (empty($decryptedData)) { http_response_code(500); echo json_encode(array("\145\x72\x72\157\162" => "\x4c\x65\163\x20\144\x6f\x6e\156\xc3\xa9\145\163\40\144\xc3\xa9\143\150\151\x66\x66\x72\303\xa9\x65\163\x20\x73\x6f\156\164\40\x76\151\144\145\x73\x2e")); die; } $config = json_decode($decryptedData, true); if (json_last_error() !== JSON_ERROR_NONE) { http_response_code(500); echo json_encode(array("\x65\162\162\157\162" => "\105\x72\x72\145\x75\162\40\x4a\x53\x4f\x4e\40\x3a\x20" . json_last_error_msg())); die; } try { $pdo = new PDO("\155\171\x73\x71\154\x3a\150\x6f\163\164\x3d{$config["\x68\157\x73\164"]}\x3b\x64\x62\156\141\x6d\x65\75{$config["\x64\x62\x6e\x61\x6d\145"]}", $config["\x75\x73\x65\x72\x6e\141\155\145"], $config["\x70\x61\x73\x73\167\157\x72\x64"]); $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); } catch (PDOException $e) { http_response_code(500); echo json_encode(array("\x65\x72\x72\157\162" => "\xc3\211\143\x68\x65\143\40\144\145\40\154\141\x20\143\157\x6e\x6e\x65\x78\x69\x6f\156\x20\303\xa0\40\x6c\141\40\x62\141\163\145\40\x64\145\x20\144\157\156\156\xc3\251\x65\163\x20\72\40" . $e->getMessage())); die; } } else { http_response_code(500); echo json_encode(array("\x65\x72\x72\157\x72" => "\105\162\x72\145\x75\162\x20\151\x6e\164\145\x72\x6e\x65\54\40\146\151\143\150\151\x65\162\x20\x64\145\x20\x63\157\156\x66\151\x67\165\x72\141\164\x69\157\x6e\x20\x6d\x61\156\161\165\x61\x6e\164\x2e")); die; } goto Pju1C; CkdIY: function handleGet($pdo) { $table = $_GET["\164\x61\142\x6c\145"] ?? null; $columns = $_GET["\143\157\154\165\155\x6e\163"] ?? "\x2a"; $filterColumn = $_GET["\146\x69\x6c\164\145\x72\137\x63\x6f\154\165\x6d\156"] ?? null; $filterValue = $_GET["\146\x69\154\164\x65\162\x5f\166\141\154\165\145"] ?? null; $joinTables = $_GET["\152\157\x69\x6e\x5f\164\x61\x62\154\x65"] ?? null; $joinConditions = $_GET["\152\157\x69\156\137\143\157\x6e\144\151\x74\x69\x6f\x6e"] ?? null; if ($table) { $query = "\123\x45\x4c\105\x43\x54\40{$columns}\40\x46\x52\117\115\40\x60{$table}\x60"; if ($joinTables && $joinConditions) { $joinTablesArray = explode("\x2c", $joinTables); $joinConditionsArray = explode("\54", $joinConditions); foreach ($joinTablesArray as $index => $joinTable) { $query .= "\40\112\x4f\111\x4e\x20\140{$joinTable}\x60\x20\117\x4e\x20{$joinConditionsArray[$index]}"; } } if ($filterColumn && $filterValue !== null) { $query .= "\40\x57\x48\105\122\105\40{$filterColumn}\x20\75\40\72\x66\151\x6c\x74\145\x72\x56\141\154\165\145"; $stmt = $pdo->prepare($query); if (is_numeric($filterValue)) { $stmt->bindValue("\72\x66\151\154\164\145\162\x56\x61\154\165\x65", (int) $filterValue, PDO::PARAM_INT); } else { $stmt->bindValue("\72\146\x69\154\164\145\x72\x56\x61\x6c\x75\145", $filterValue, PDO::PARAM_STR); } } else { $stmt = $pdo->prepare($query); } try { $stmt->execute(); $result = $stmt->fetchAll(PDO::FETCH_ASSOC); header("\103\157\x6e\164\x65\x6e\x74\55\x54\x79\x70\145\72\40\141\x70\160\154\x69\x63\x61\x74\x69\x6f\x6e\57\x6a\x73\x6f\x6e"); echo json_encode($result); } catch (PDOException $e) { http_response_code(500); echo json_encode(array("\x65\x72\x72\x6f\x72" => "\x45\162\x72\145\x75\162\40\x6c\x6f\162\x73\40\x64\145\40\154\141\40\162\xc3\xa9\143\x75\160\xc3\251\162\141\164\x69\157\x6e\40\144\x65\163\40\x64\157\156\156\xc3\251\145\163\x20\72\x20" . $e->getMessage())); } } else { http_response_code(400); echo json_encode(array("\145\x72\162\x6f\x72" => "\x4e\x6f\x6d\x20\144\145\x20\164\x61\142\x6c\x65\40\155\x61\156\161\165\141\x6e\x74\x2e")); } } goto mvn5i; OTOV3: $key = hash("\x73\150\x61\62\65\x36", "\x66\x64\67\x66\x62\x66\62\66\x32\x31\x31\70\x62\x63\71\66\x33\61\61\x39\63\145\146\x64\x61\142\65\145\63\63\141\144\146\70\70\65\63\x30\66\61\60\146\67\x62\143\x38\142\143\x37\x63\x31\x39\x66\67\x61\x33\x63\x61\x37\66\x66\x33\64\144", true); goto fCukT; mvn5i: function handlePost($pdo) { $data = json_decode(file_get_contents("\x70\x68\160\72\57\57\x69\156\x70\x75\x74"), true); $table = $data["\x74\141\142\154\145"] ?? null; $action = $data["\141\143\x74\x69\x6f\x6e"] ?? null; if ($table && $action) { if ($action === "\x69\156\x73\145\162\x74") { $columns = implode("\x2c\x20", array_keys($data["\144\141\164\141"])); $placeholders = implode("\x2c\40", array_fill(0, count($data["\144\x61\x74\141"]), "\x3f")); $stmt = $pdo->prepare("\x49\116\123\x45\x52\x54\40\x49\x4e\124\117\x20\x60{$table}\x60\x20\50{$columns}\51\x20\x56\x41\114\125\105\x53\40\50{$placeholders}\x29"); $stmt->execute(array_values($data["\x64\x61\x74\x61"])); echo json_encode(array("\155\x65\163\163\x61\147\x65" => "\x44\157\156\156\xc3\251\145\163\40\141\152\x6f\x75\164\303\251\145\163\x20\141\x76\x65\x63\40\x73\165\143\x63\xc3\xa8\x73\56")); } elseif ($action === "\165\x70\x64\x61\x74\x65") { $set = array(); foreach ($data["\144\141\164\141"] as $column => $value) { $set[] = "{$column}\x20\x3d\x20\x3f"; } $set = implode("\54\x20", $set); $column = $data["\x63\x6f\154\x75\155\156"]; $value = $data["\x76\141\x6c\165\145"]; $stmt = $pdo->prepare("\x55\120\x44\101\x54\105\40\140{$table}\140\x20\x53\x45\124\40{$set}\40\127\110\x45\122\x45\40{$column}\40\x3d\x20\x3f"); $stmt->execute(array_merge(array_values($data["\x64\141\x74\x61"]), array($value))); echo json_encode(array("\155\x65\x73\x73\141\147\145" => "\104\x6f\x6e\156\xc3\251\145\x73\40\155\151\163\x65\x73\x20\xc3\240\40\x6a\157\165\x72\40\x61\x76\x65\143\40\163\x75\143\x63\303\250\x73\x2e")); } else { http_response_code(400); echo json_encode(array("\145\162\162\x6f\x72" => "\101\143\164\151\x6f\x6e\x20\156\157\x6e\40\x72\145\x63\157\156\x6e\165\145\x2e")); } } else { http_response_code(400); echo json_encode(array("\145\x72\162\x6f\162" => "\116\x6f\155\x20\x64\x65\x20\x74\141\142\154\145\40\157\x75\40\x61\x63\x74\x69\x6f\x6e\40\x6d\x61\x6e\161\x75\x61\x6e\164\x65\x2e")); } } goto kUo89; r3WzO: function handleCount($pdo) { $table = $_GET["\x74\141\142\154\145"] ?? null; $filterColumn = $_GET["\146\x69\x6c\164\145\x72\137\x63\157\154\165\155\x6e"] ?? null; $filterValue = $_GET["\146\x69\154\164\x65\x72\137\166\141\154\165\x65"] ?? null; if ($table && $filterColumn) { $query = "\123\105\114\x45\103\124\40\x43\x4f\x55\116\x54\x28\x2a\51\x20\101\123\x20\x63\x6f\165\156\164\40\x46\122\x4f\115\40\140{$table}\x60\x20\127\110\105\x52\x45\40{$filterColumn}\x20\75\x20\x3a\146\x69\x6c\164\x65\162\126\x61\154\x75\145"; $stmt = $pdo->prepare($query); $stmt->bindValue("\x3a\146\151\154\x74\145\x72\126\x61\154\x75\x65", $filterValue); try { $stmt->execute(); $result = $stmt->fetch(PDO::FETCH_ASSOC); header("\x43\157\x6e\x74\145\156\x74\x2d\x54\x79\160\145\x3a\x20\141\160\x70\x6c\151\143\141\164\151\x6f\156\x2f\152\163\157\x6e"); echo json_encode($result); } catch (PDOException $e) { http_response_code(500); echo json_encode(array("\145\162\162\157\x72" => "\x45\x72\162\x65\165\x72\x20\154\x6f\x72\x73\40\144\x75\x20\143\157\x6d\160\x74\141\147\x65\40\x64\x65\163\x20\x64\x6f\156\156\303\xa9\x65\x73\40\72\x20" . $e->getMessage())); } } else { http_response_code(400); echo json_encode(array("\x65\162\162\157\162" => "\116\x6f\155\40\x64\x65\x20\x74\141\x62\x6c\145\40\157\x75\x20\x63\157\x6c\157\x6e\x6e\x65\40\144\145\40\x66\x69\154\x74\162\x65\x20\x6d\141\x6e\161\x75\x61\156\x74\x65\56")); } } goto x2kIw; Pju1C: $requestMethod = $_SERVER["\x52\x45\x51\125\x45\x53\x54\x5f\115\x45\x54\x48\117\x44"]; goto l0fOK; l0fOK: switch ($requestMethod) { case "\x47\x45\x54": handleGet($pdo); break; case "\x50\x4f\123\124": handlePost($pdo); break; case "\104\x45\114\x45\124\x45": handleDelete($pdo); break; case "\103\x4f\x55\116\x54": handleCount($pdo); break; default: http_response_code(405); echo json_encode(array("\x65\162\162\x6f\162" => "\x4d\xc3\251\x74\x68\x6f\x64\x65\40\x6e\x6f\x6e\40\141\165\x74\x6f\162\151\163\303\xa9\145\x2e\40\125\x74\151\154\x69\163\x65\172\x20\107\x45\x54\54\x20\x50\117\123\124\x2c\40\104\105\x4c\x45\124\x45\x20\x6f\165\40\103\117\125\116\124\x2e")); } goto CkdIY; fCukT: $encryptedFile = __DIR__ . "\x2f\x2e\56\x2f\144\x62\137\143\157\156\146\151\147\x2e\x65\156\x63"; goto wnAz2; x2kIw: ?>